System.register(["./index-legacy-94a3f3b8.js","./FolderTree-legacy-f80a5118.js","./PublicKeys-legacy-4b36ec99.js","./index-legacy-2372de45.js"],(function(e,r){"use strict";var n,t,s,a,l,i,u,d,c,g,o,p,h,m,f,b,w,y,x,$,I,_,v,k,C;return{setters:[e=>{n=e.b,t=e.d,s=e.cp,a=e.b3,l=e.bk,i=e.y,u=e.aa,d=e.bR,c=e.S,g=e.aq,o=e.bL,p=e.by,h=e.I,m=e.bS,f=e.K,b=e.aP,w=e.b5,y=e.D,x=e.bl,$=e.n,I=e.ar,_=e.d2,v=e.ah},e=>{k=e.a},e=>{C=e.P},null],execute:function(){const r=e=>{const r=n();return i(o,{display:"inline-flex",flexDirection:"row",alignItems:"center",gap:"$2",rounded:"$md",shadow:"$md",p:"$2",w:"fit-content",get children(){return[i(p,{mb:"0",get children(){return r(`users.permissions.${e.name}`)}}),i(w,{get checked(){return e.can},onChange:()=>e.onChange(!e.can)})]}})};e("default",(()=>{const e=n(),{params:q,back:D}=t(),{id:S}=q,[j,T]=s({id:0,username:"",password:"",base_path:"",role:0,permission:0,disabled:!1,sso_id:""}),[P,F]=a((()=>l.get(`/admin/user/get?id=${S}`)));S&&(async()=>{const e=await F();x(e,T)})();const[K,z]=a((()=>l.post("/admin/user/"+(S?"update":"create"),j)));return i(v,{get loading(){return P()},get children(){return i(u,{w:"$full",alignItems:"start",spacing:"$2",get children(){return[i(d,{get children(){return e("global."+(S?"edit":"add"))}}),i(c,{get when(){return!g.is_guest(j)},get children(){return[i(o,{w:"$full",display:"flex",flexDirection:"column",required:!0,get children(){return[i(p,{for:"username",display:"flex",alignItems:"center",get children(){return e("users.username")}}),i(h,{id:"username",get value(){return j.username},onInput:e=>T("username",e.currentTarget.value)})]}}),i(o,{w:"$full",display:"flex",flexDirection:"column",required:!0,get children(){return[i(p,{for:"password",display:"flex",alignItems:"center",get children(){return e("users.password")}}),i(h,{id:"password",type:"password",placeholder:"********",get value(){return j.password},onInput:e=>T("password",e.currentTarget.value)})]}})]}}),i(o,{w:"$full",display:"flex",flexDirection:"column",required:!0,get children(){return[i(p,{for:"base_path",display:"flex",alignItems:"center",get children(){return e("users.base_path")}}),i(k,{id:"base_path",get value(){return j.base_path},onChange:e=>T("base_path",e),onlyFolder:!0})]}}),i(o,{w:"$full",required:!0,get children(){return[i(p,{display:"flex",alignItems:"center",get children(){return e("users.permission")}}),i(m,{w:"$full",wrap:"wrap",gap:"$2",get children(){return i(f,{each:b,children:(e,n)=>i(r,{name:e,get can(){return g.can(j,n())},onChange:e=>{T("permission",e?j.permission|=1<<n():j.permission&=~(1<<n()))}})})}})]}}),i(o,{w:"fit-content",display:"flex",get children(){return i(w,{css:{whiteSpace:"nowrap"},id:"disabled",onChange:e=>T("disabled",e.currentTarget.checked),color:"$neutral10",fontSize:"$sm",get checked(){return j.disabled},get children(){return e("users.disabled")}})}}),i(y,{get loading(){return K()},onClick:async()=>{const r=await z();x(r,(async()=>{$.success(e("global.save_success")),j.username===I().username&&x(await l.get("/me"),_),D()}))},get children(){return e("global."+(S?"save":"add"))}}),i(c,{get when(){return S&&!g.is_guest(j)},get children(){return i(C,{isMine:!1,get userId(){return parseInt(S)}})}})]}})}})}))}}}));
